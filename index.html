<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoramento EFSC - 1936</title>
    <style>
        :root {
            --bg-color: #f4f1ea;
            --text-color: #2c2c2c;
            --rail-color: #555;
            --station-color: #000;
            --train-asc: #d32f2f;
            --train-desc: #1976d2;
        }

        body {
            font-family: 'Courier New', Courier, monospace;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1,
        h2 {
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-bottom: 2px solid #000;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        /* RELÓGIO ANALÓGICO */
        .analog-clock {
            width: 150px;
            height: 150px;
            background-color: #fdfaf0;
            border: 8px solid #333;
            border-radius: 50%;
            position: relative;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .clock-face {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .number {
            position: absolute;
            width: 100%;
            height: 100%;
            text-align: center;
            font-family: 'Georgia', serif;
            font-weight: bold;
            font-size: 1.1rem;
            color: #222;
            padding: 5px;
            box-sizing: border-box;
        }

        .n1 {
            transform: rotate(30deg);
        }

        .n1 span {
            display: block;
            transform: rotate(-30deg);
        }

        .n2 {
            transform: rotate(60deg);
        }

        .n2 span {
            display: block;
            transform: rotate(-60deg);
        }

        .n3 {
            transform: rotate(90deg);
        }

        .n3 span {
            display: block;
            transform: rotate(-90deg);
        }

        .n4 {
            transform: rotate(120deg);
        }

        .n4 span {
            display: block;
            transform: rotate(-120deg);
        }

        .n5 {
            transform: rotate(150deg);
        }

        .n5 span {
            display: block;
            transform: rotate(-150deg);
        }

        .n6 {
            transform: rotate(180deg);
        }

        .n6 span {
            display: block;
            transform: rotate(-180deg);
        }

        .n7 {
            transform: rotate(210deg);
        }

        .n7 span {
            display: block;
            transform: rotate(-210deg);
        }

        .n8 {
            transform: rotate(240deg);
        }

        .n8 span {
            display: block;
            transform: rotate(-240deg);
        }

        .n9 {
            transform: rotate(270deg);
        }

        .n9 span {
            display: block;
            transform: rotate(-270deg);
        }

        .n10 {
            transform: rotate(300deg);
        }

        .n10 span {
            display: block;
            transform: rotate(-300deg);
        }

        .n11 {
            transform: rotate(330deg);
        }

        .n11 span {
            display: block;
            transform: rotate(-330deg);
        }

        .hand {
            position: absolute;
            bottom: 50%;
            left: 50%;
            transform-origin: bottom;
            background-color: #000;
            border-radius: 10px;
            z-index: 5;
        }

        .hour-hand {
            width: 6px;
            height: 35px;
            margin-left: -3px;
        }

        .min-hand {
            width: 4px;
            height: 55px;
            margin-left: -2px;
        }

        .sec-hand {
            width: 2px;
            height: 60px;
            background-color: #d32f2f;
            margin-left: -1px;
            z-index: 6;
        }

        .clock-center {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 10px;
            height: 10px;
            background: #000;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }

        .status-panel {
            margin-bottom: 30px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: bold;
        }

        /* CONTAINER DA FERROVIA */
        .railway-container {
            position: relative;
            width: 95%;
            max-width: 1200px;
            height: 420px;
            margin-bottom: 60px;
            border: 1px solid #ccc;
            background: #fff;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: visible;
        }

        .line-title {
            position: absolute;
            top: 10px;
            left: 20px;
            font-weight: bold;
            font-size: 1.1rem;
            background: #fff;
            padding: 0 5px;
            z-index: 2;
        }

        .track-line {
            position: absolute;
            top: 150px;
            left: 80px;
            right: 80px;
            height: 4px;
            background-color: var(--rail-color);
            border-radius: 2px;
        }

        .track-branch {
            position: absolute;
            top: 150px;
            width: 4px;
            height: 120px;
            background-color: var(--rail-color);
            z-index: 1;
        }

        .station {
            position: absolute;
            transform: translate(-50%, -50%);
            width: 12px;
            height: 12px;
            background-color: #fff;
            border: 3px solid var(--station-color);
            border-radius: 50%;
            z-index: 5;
        }

        .station-label {
            position: absolute;
            bottom: 18px;
            left: 50%;
            transform: rotate(-45deg);
            transform-origin: 0% 100%;
            white-space: nowrap;
            font-size: 0.75rem;
            font-weight: bold;
            margin-left: -2px;
        }

        .station-km {
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            color: #666;
        }

        .train {
            position: absolute;
            width: 40px;
            height: 24px;
            background: var(--train-asc);
            color: white;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transform: translate(-50%, -50%);
            z-index: 10;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
            transition: left 1s linear, top 1s linear;
        }

        .train.desc {
            background: var(--train-desc);
        }

        /* Rotaciona os trens do ramal para ficarem verticais */
        .train.branch-train {
            transform: translate(-50%, -50%) rotate(90deg);
        }

        .legend {
            display: flex;
            gap: 20px;
            font-size: 0.8rem;
            margin-bottom: 20px;
        }

        .dot {
            width: 10px;
            height: 10px;
            display: inline-block;
            margin-right: 5px;
        }

        /* SEÇÃO SOBRE */
        .about-section {
            margin-top: 20px;
            padding: 25px;
            max-width: 800px;
            background-color: #eeebe3;
            border: 2px solid #5d5d5d;
            border-radius: 4px;
            box-shadow: 5px 5px 0px rgba(0, 0, 0, 0.1);
        }

        .train-legend-box {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
            background: #fff;
            padding: 15px;
            border: 1px solid #999;
        }

        .train-group {
            border-left: 4px solid #555;
            padding-left: 15px;
        }

        .type-p {
            border-color: var(--train-asc);
        }
    </style>
</head>

<body>

    <h1>Estrada de Ferro Santa Catharina</h1>
    <h2>Monitoramento Histórico - 1936</h2>

    <div class="analog-clock">
        <div class="clock-face">
            <div class="number n1"><span>1</span></div>
            <div class="number n2"><span>2</span></div>
            <div class="number n3"><span>3</span></div>
            <div class="number n4"><span>4</span></div>
            <div class="number n5"><span>5</span></div>
            <div class="number n6"><span>6</span></div>
            <div class="number n7"><span>7</span></div>
            <div class="number n8"><span>8</span></div>
            <div class="number n9"><span>9</span></div>
            <div class="number n10"><span>10</span></div>
            <div class="number n11"><span>11</span></div>
            <div class="number n12"><span>12</span></div>
            <div class="hand hour-hand" id="hour-hand"></div>
            <div class="hand min-hand" id="min-hand"></div>
            <div class="hand sec-hand" id="sec-hand"></div>
            <div class="clock-center"></div>
        </div>
    </div>

    <div class="status-panel" id="status-msg">Iniciando sistemas...</div>

    <div class="legend">
        <div><span class="dot" style="background: var(--train-asc)"></span>Ascendente (Blumenau -> Interior)</div>
        <div><span class="dot" style="background: var(--train-desc)"></span>Descendente (Interior -> Blumenau)</div>
    </div>

    <div class="railway-container" id="map-container">
        <div class="line-title">Malha Ferroviária EFSC: Linha Principal e Ramal Hammonia</div>
        <div class="track-line"></div>
    </div>

    <section class="about-section">
        <section style="line-height: 1.6; color: #333; max-width: 800px; font-family: sans-serif;">
            <h2 style="color: #2c3e50; border:none; text-align:left; margin-bottom:15px;">Sobre o Projeto</h2>
            <p>
                Este simulador é fundamentado nos horários oficiais publicados pelo jornal <strong>A Cidade</strong> em
                26 de setembro de 1936, refletindo a malha ferroviária da <strong>Estrada de Ferro Santa Catharina
                    (EFSC)</strong> que entrou em vigor em outubro de 1936.
            </p>
            <div style="background-color: #f9f9f9; border-left: 4px solid #2c3e50; padding: 15px; margin: 20px 0;">
                <strong>Guia de Tráfego:</strong>
                <p style="margin: 5px 0;">
                    O horário de pico ocorre principalmente no período da manhã <strong>(06:20 às 11:30)</strong>,
                    quando há maior circulação simultânea de trens diários, cargueiros e composições de domingo em ambos
                    os sentidos. Outro ponto de alta movimentação é no final da tarde <strong>(17:00 às 19:00)</strong>,
                    especialmente na região de <strong>Subida e Rio do Sul</strong>, devido às conexões estratégicas com
                    o Ramal de Hammonia.
                </p>
            </div>
            <p
                style="font-style: italic; font-size: 0.95em; color: #444; background-color: #fff9e6; padding: 10px; border-radius: 4px;">
                <strong>Nota de Embarque:</strong> Se você abrir o mapa e não encontrar nenhum trem se movimentando, não
                se preocupe: você está presenciando o silêncio real das trilhas naquela hora específica. Volte em outros
                horários ou consulte o jornal na Hemeroteca para saber a que horas você deve "embarcar" (risos).
            </p>
            <hr style="border: 0; border-top: 1px solid #eee; margin: 20px 0;">
            <p style="font-size: 0.85em; color: #666; line-height: 1.4;">
                <em>Atenção: O programa pode apresentar oscilações técnicas ou erros pontuais de funcionamento. O
                    projeto é uma ferramenta de resgate histórico e não possui pretensão de exatidão técnica
                    absoluta.</em><br><br>
                <strong>Autor:</strong> Daniel Baumann | <strong>Fonte:</strong> Hemeroteca Digital Brasileira.
            </p>
        </section>

        <div class="train-legend-box">
            <div class="train-group type-p">
                <h3>Trens P</h3>
                <div style="font-size:0.8rem">P1/P2: Diário<br>P3/P4: Domingos</div>
            </div>
            <div class="train-group">
                <h3>Trens M</h3>
                <div style="font-size:0.8rem">M1/M2: Exceto Dom.<br>MR: Misto Ramal</div>
            </div>
        </div>

        <p><strong>Elaborado por:</strong> Daniel Baumann</p>
        <a href="http://memoria.bn.gov.br/DocReader/882860/2706" target="_blank">Fonte: Horário dos Trens - EFSC -
            1936</a>
    </section>

    <script>
        const MAIN_LENGTH = 104.3;
        const SUBIDA_KM = 63.1;
        const BRANCH_LENGTH = 12.0;

        const mainStations = [
            { name: "Blumenau", km: 0.0 }, { name: "Itoupava Secca", km: 2.9 },
            { name: "Salto Weissbach", km: 8.7 }, { name: "Encano", km: 16.9 },
            { name: "Indayal", km: 22.0 }, { name: "Warnow", km: 30.7 },
            { name: "Eng. Pedro Gomes", km: 41.5 }, { name: "Aquidaban", km: 50.1 },
            { name: "Subida", km: 63.1 }, { name: "Riachuelo", km: 83.4 },
            { name: "Lontras", km: 85.3 }, { name: "Matador", km: 91.0 },
            { name: "Rio do Sul", km: 97.8 }, { name: "Barra do Trombudo", km: 104.3 }
        ];

        const trains = [
            { id: "P1", days: [0, 1, 2, 3, 4, 5, 6], start: "15:00", end: "19:05", dir: 1, line: "main" },
            { id: "P3", days: [0], start: "06:50", end: "10:54", dir: 1, line: "main" },
            { id: "M1", days: [1, 2, 3, 4, 5, 6], start: "06:20", end: "11:32", dir: 1, line: "main" },
            { id: "P2", days: [0, 1, 2, 3, 4, 5, 6], start: "05:02", end: "09:05", dir: -1, line: "main" },
            { id: "P4", days: [0], start: "14:32", end: "18:35", dir: -1, line: "main" },
            { id: "M2", days: [1, 2, 3, 4, 5, 6], start: "06:06", end: "11:09", dir: -1, line: "main" },
            { id: "PR1", days: [0, 1, 2, 3, 4, 5, 6], start: "17:22", end: "17:44", dir: 1, line: "branch" },
            { id: "PR3", days: [0], start: "09:11", end: "09:33", dir: 1, line: "branch" },
            { id: "MR1", days: [1, 2, 3, 4, 5, 6], start: "09:31", end: "09:57", dir: 1, line: "branch" },
            { id: "MR2", days: [1, 2, 3, 4, 5, 6], start: "07:40", end: "08:06", dir: -1, line: "branch" },
            { id: "PR4", days: [0], start: "15:50", end: "16:13", dir: -1, line: "branch" },
            { id: "PR2", days: [0, 1, 2, 3, 4, 5, 6], start: "06:20", end: "06:43", dir: -1, line: "branch" }
        ];

        function initMap() {
            const container = document.getElementById('map-container');
            const subidaX = `calc(80px + (${SUBIDA_KM / MAIN_LENGTH} * (100% - 160px)))`;

            mainStations.forEach(st => {
                const el = document.createElement('div');
                el.className = 'station';
                el.style.left = `calc(80px + (${st.km / MAIN_LENGTH} * (100% - 160px)))`;
                el.style.top = '150px';
                el.innerHTML = `<div class="station-label">${st.name}</div><div class="station-km">${st.km.toFixed(1)}</div>`;
                container.appendChild(el);
            });

            const branchRail = document.createElement('div');
            branchRail.className = 'track-branch';
            branchRail.style.left = subidaX;
            container.appendChild(branchRail);

            const hammonia = document.createElement('div');
            hammonia.className = 'station';
            hammonia.style.left = subidaX;
            hammonia.style.top = '270px';
            hammonia.innerHTML = `<div class="station-label" style="transform:rotate(0); left:15px; bottom:-5px">Hammonia</div><div class="station-km">12.0 km</div>`;
            container.appendChild(hammonia);
        }

        function updateSimulation() {
            const now = new Date();
            const hr = now.getHours(), min = now.getMinutes(), sec = now.getSeconds();
            const curMin = hr * 60 + min + (sec / 60);
            const curDay = now.getDay();

            document.getElementById('sec-hand').style.transform = `rotate(${sec * 6}deg)`;
            document.getElementById('min-hand').style.transform = `rotate(${(min + sec / 60) * 6}deg)`;
            document.getElementById('hour-hand').style.transform = `rotate(${(hr % 12 + min / 60) * 30}deg)`;

            document.querySelectorAll('.train').forEach(e => e.remove());
            let active = 0;

            trains.forEach(t => {
                if (!t.days.includes(curDay)) return;
                const sMin = timeToMin(t.start), eMin = timeToMin(t.end);

                if (curMin >= sMin && curMin <= eMin) {
                    active++;
                    const progress = (curMin - sMin) / (eMin - sMin);
                    const trainEl = document.createElement('div');

                    // Adiciona classe branch-train se o trem for do ramal
                    const branchClass = t.line === 'branch' ? 'branch-train' : '';
                    trainEl.className = `train ${t.dir === -1 ? 'desc' : ''} ${branchClass}`;
                    trainEl.innerText = t.id;

                    if (t.line === 'main') {
                        const km = t.dir === 1 ? progress * MAIN_LENGTH : MAIN_LENGTH - (progress * MAIN_LENGTH);
                        trainEl.style.left = `calc(80px + (${km / MAIN_LENGTH} * (100% - 160px)))`;
                        trainEl.style.top = '150px';
                    } else {
                        const subidaXPos = `calc(80px + (${SUBIDA_KM / MAIN_LENGTH} * (100% - 160px)))`;
                        const yProgress = t.dir === 1 ? progress : 1 - progress;
                        trainEl.style.left = subidaXPos;
                        trainEl.style.top = (150 + (yProgress * 120)) + "px";
                    }
                    document.getElementById('map-container').appendChild(trainEl);
                }
            });
            document.getElementById('status-msg').innerText = active > 0 ? `${active} trem(s) em tráfego.` : "Nenhum trem em tráfego no momento.";
        }

        function timeToMin(t) {
            const [h, m] = t.split(':').map(Number);
            return h * 60 + m;
        }

        initMap();
        setInterval(updateSimulation, 1000);
        updateSimulation();
    </script>
</body>

</html>